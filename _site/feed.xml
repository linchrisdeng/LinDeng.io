<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Lin Blog</title>
    <description>What did I do &amp;&amp; What will I do</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Fri, 10 May 2019 11:20:42 -0500</pubDate>
    <lastBuildDate>Fri, 10 May 2019 11:20:42 -0500</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>Machine Learning Optimization I</title>
        <description>&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

&lt;p&gt;Before talking about optimization in Machine Learning we need to clarify a question:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A: What does a machine learn?&lt;/p&gt;

  &lt;p&gt;B: Algorithms! Supervised/Unsupervised Learning! KNN, Naive Bayes! Trees!&lt;/p&gt;

  &lt;p&gt;A: Well, these are what we human beings need to learn. The question is WHAT does a MACHINE LEARN?&lt;/p&gt;

  &lt;p&gt;B: I am not sure about your problemâ€¦&lt;/p&gt;

  &lt;p&gt;A: &lt;strong&gt;PARAMETERS!&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Before we start talking about how machine learn parameters, we trully need to review some mathmatics.&lt;/p&gt;

&lt;h3 id=&quot;taylor-series-approximation&quot;&gt;Taylor Series Approximation&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;If you are tired of reading, please check this &lt;a href=&quot;https://www.khanacademy.org/math/ap-calculus-bc/bc-series-new/bc-10-11/v/maclaurin-and-taylor-series-intuition&quot;&gt;LINK&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Sat, 27 Apr 2019 07:00:00 -0500</pubDate>
        <link>http://localhost:4000/2019/04/27/Machine-Learning-Optimization-I/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/04/27/Machine-Learning-Optimization-I/</guid>
        
        <category>Machine Learning</category>
        
        <category>Optimization</category>
        
        
      </item>
    
      <item>
        <title>Optimization Modeling: Sports League Realignment</title>
        <description>&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;

&lt;p&gt;For MLB, NBA, NFL, NHL these four big leagues in North America normally consists of 30 to 32 teams. These teams will play same number of home and away games in the same division, and against some teams in other conferences and divisions.&lt;/p&gt;

&lt;p&gt;Take the National Hockey League (NHL) as an example, prior to 2013, the league was structured into two 15-team conferences, each subdivided into three 5-team. This kind of assignment is called &lt;strong&gt;League Structure&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tNc79ly1g2vhqa9bd9j310o04u0tb.jpg&quot; alt=&quot;NHL 2008-2012&quot; /&gt;&lt;/p&gt;

&lt;p&gt;But for 2013-2014 season, the league realign the number of subdivision to 4.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://ws1.sinaimg.cn/large/006tNc79ly1g2viahuipbj30f302uaa6.jpg&quot; alt=&quot;NHL 2013-2014&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Hence for this optimization problem we need to focus on how to build a model that will support the construction of a efficient league structure.&lt;/p&gt;

&lt;h2 id=&quot;league-structure-evaluation&quot;&gt;League Structure Evaluation&lt;/h2&gt;

&lt;p&gt;The purpose of constructing a league structure is to minimize the total travel distance for a whole season. We set $S$ as the league structure, the measure or objective function $D(S)$ is defined as the total distances over all games between pairs $(i, j)$ teams or cities. Base on above, let $d(i,j) $ as distance between teams or home cities $(i, j)$ , $g(i, j)$ as the number of games between pair $(i, j)$ in a season. The objective can be defined as:&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;D(S) = \sum_{(i,j)}d(i, j)g(i,j)&lt;/script&gt;

&lt;h2 id=&quot;mixed-integer-programming-mip&quot;&gt;Mixed Integer Programming (MIP)&lt;/h2&gt;

&lt;p&gt;Our realignment (league structure) is a common Mixed Integer Progarmming which require one additional condition that at least one of the variables can and only take integer value. For NHL teams whther to be assigned to one of subdivision is a binary (0 or 1) problem.&lt;/p&gt;

&lt;p&gt;The basic form of MIP:&lt;/p&gt;

&lt;p&gt;Minimize&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\beta^T X&lt;/script&gt;

&lt;p&gt;subject to&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;AX \le b, X\geq 0&lt;/script&gt;

&lt;p&gt;Where&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;X = (x_1, x_2, x_3, ..., x_n)^T, x_i \in X \ are \ restricted\  to\  integer&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\beta = (\beta_1, \beta_2, \beta_3,..., \beta_n)^T&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
A = \begin {pmatrix}a_{11} &amp;...  &amp;a_{1n}\\ \vdots &amp;\ddots &amp;\vdots \\a_{n1} &amp;... &amp;a_{nn} \end {pmatrix} %]]&gt;&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;b = (b_1, b_2, b_3,..., b_n)^T&lt;/script&gt;

&lt;h2 id=&quot;minimizing-the-total-league-travel-distance-mip&quot;&gt;Minimizing the total league travel distance MIP&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;$T$ is a set of $n$ teams or cities&lt;/li&gt;
  &lt;li&gt;$S$ is a set of $s$ divisions&lt;/li&gt;
  &lt;li&gt;$D = (D_{ij} = d(i, j): i, j \in T)$ is a $n \times n$ matrix that contains distance between each pair of cities&lt;/li&gt;
  &lt;li&gt;G is a $s \times s$ matrix. $G_{u, v}$ represent average number of games between division $u$ and $v$, it was calculated by the understanding the schedule of NHL, details could be seen at &lt;a href=&quot;https://en.wikipedia.org/wiki/Season_structure_of_the_NHL&quot;&gt;Season structure of the NHL&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Set $b$ as the number of teams assigned into each divisions&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;2008 - 2012&lt;/strong&gt;&lt;/p&gt;

  &lt;p&gt;NHL was a 2-conference, 6-division league where $n = 30, s = 6, b = [5, 5, 5, 5, 5, 5]$&lt;/p&gt;
&lt;/blockquote&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
G = \begin{pmatrix} 3 &amp; 2 &amp; 2 &amp; 0.6 &amp; 0.6 &amp; 0.6 \\ 2 &amp; 3 &amp; 2 &amp; 0.6 &amp; 0.6 &amp; 0.6 \\ 2 &amp; 2 &amp; 3 &amp; 0.6 &amp; 0.6 &amp; 0.6 \\ 0.6 &amp; 0.6 &amp; 0.6 &amp; 3 &amp; 2 &amp; 2 \\ 0.6 &amp; 0.6 &amp; 0.6 &amp; 2 &amp; 3 &amp; 2 \\   0.6 &amp; 0.6 &amp; 0.6 &amp; 2 &amp; 2 &amp; 3 \\\end{pmatrix} %]]&gt;&lt;/script&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;2013 - 2014&lt;/strong&gt;&lt;/p&gt;

  &lt;p&gt;NHL had 4 divisions where $n = 30, s = 4, b = [7, 7, 8, 8]$&lt;/p&gt;
&lt;/blockquote&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;% &lt;![CDATA[
G = \begin{pmatrix} \frac{15}{7} &amp; \frac{3}{2} &amp; 1 &amp; 1 \\ \frac{3}{2} &amp; \frac{15}{7} &amp;1 &amp; 1 \\ 1 &amp; 1 &amp; \frac{14.5}{6} &amp; \frac{3}{2} \\ 1 &amp; 1 &amp; \frac{3}{2} &amp; \frac{14.5}{6} \end{pmatrix} %]]&gt;&lt;/script&gt;

&lt;h3 id=&quot;formulate-mip&quot;&gt;Formulate MIP&lt;/h3&gt;

&lt;p&gt;Set $x_{iu} = 1$ if team i in division j else $x_{iu} = 0$. Hence, we can get objective function as&lt;/p&gt;

&lt;p&gt;minimize&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;F(x) = \sum_{i,j \in T} \sum_{u,v \in S} x_{iu} \cdot x_{jv} \cdot D_{ij} \cdot G_{uv}&lt;/script&gt;

&lt;blockquote&gt;
  &lt;p&gt;However, this may lead objective function $F(x) = 0$,  or one of the team will be assigned to multiple divisions, then we need a more rigorous term to define the assignment of each teams corresponding to each divisions.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Set $Y_{ijuv}$ as follows: for each pair of teams $(i,j)$ and each pair of divisions $(u, v)$, if $y_{ijuv} = 1$ means team $i$ is assigned to division $u$, team $j$ is assigned to division $v$&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;$\sum_{u, v \in S} Y_{ijuv} = 1$ for each pair of cities $(i, j)$&lt;/li&gt;
  &lt;li&gt;$\sum_{i, j \in T} Y_{ijuv} = b_u \cdot b_v$ for each pair of divisions $(u, v)$&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For now we can summarize out MIP optimization:&lt;/p&gt;

&lt;p&gt;minimize&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\sum_{i,j\in T; u,v\in S} Y_{ijuv} \cdot D_{ij}  \cdot G_{uv}&lt;/script&gt;

&lt;p&gt;s.t.&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\sum_{i \in T} x_{iu} = b_u \ for \ u \in S&lt;/script&gt;

&lt;blockquote&gt;
  &lt;p&gt;number of teams in each division must fullfill requirment&lt;/p&gt;
&lt;/blockquote&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\sum_{u \in S}  x_{iu} = 1 \ for \  i \in T&lt;/script&gt;

&lt;blockquote&gt;
  &lt;p&gt;each team can only be assigned into one division&lt;/p&gt;
&lt;/blockquote&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\sum_{u, v \in S} y_{ijuv} = 1 \ for \ each  \ pair \ of \ teams \ (i, j)&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\sum_{i, j \in T} y_{ijuv} = b_u \cdot b_v\ for \ each \ pair \ of \ divisions \ (u, v)&lt;/script&gt;

&lt;blockquote&gt;
  &lt;p&gt;for any two divisions, will have $b_u \cdot b_v$ pairs of teams&lt;/p&gt;
&lt;/blockquote&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;y_{ijuv} \leq x_{iu} \ \ \ i,j \in T \ u,v \in S&lt;/script&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;y_{ijuv} \leq x_{jv} \ \ \ i,j \in T \ u,v \in S&lt;/script&gt;

&lt;blockquote&gt;
  &lt;p&gt;$y_{ijuv} = 1$ when both $x_{iu}, x_{jv} = 1$&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;application&quot;&gt;Application&lt;/h2&gt;

&lt;p&gt;Base on the above MIP, we can apply this to our own division schedule.&lt;/p&gt;

&lt;h3 id=&quot;roller-derby&quot;&gt;Roller Derby&lt;/h3&gt;

&lt;p&gt;A organizing committee for a new Roller Derby sports league
is in the process of assigning 16 teams to four divisions in such a way that overall league travel is minimized. The 16 teams are located in the following cities.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;indianapolis,   in&lt;/th&gt;
      &lt;th&gt;columbus, oh&lt;/th&gt;
      &lt;th&gt;cincinnati, oh&lt;/th&gt;
      &lt;th&gt;st. paul, mn&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;milwaukee, wi&lt;/td&gt;
      &lt;td&gt;memphis, tn&lt;/td&gt;
      &lt;td&gt;toledo, oh&lt;/td&gt;
      &lt;td&gt;grand rapids, mi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;bloomington, il&lt;/td&gt;
      &lt;td&gt;louisville, ky&lt;/td&gt;
      &lt;td&gt;rockford, il&lt;/td&gt;
      &lt;td&gt;fort wayne, in&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;cedar rapids, ia&lt;/td&gt;
      &lt;td&gt;topeka, ks&lt;/td&gt;
      &lt;td&gt;green bay, wi&lt;/td&gt;
      &lt;td&gt;sioux falls, sd&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;And what if we assigned &lt;strong&gt;Fort Wanye, IN&lt;/strong&gt; and &lt;strong&gt;Indianapolis, IN&lt;/strong&gt; into a same division. How  does this new constraint affect the total distance and alignment ?&lt;/p&gt;

&lt;p&gt;Details can be seen in my &lt;a href=&quot;https://github.com/linchrisdeng/Optimization-Modeling-Sports-League-Realignment&quot;&gt;GitHub&lt;/a&gt; or &lt;a href=&quot;https://htmlpreview.github.io/?https://github.com/linchrisdeng/Optimization-Modeling-Sports-League-Realignment/blob/master/Realignment.html#model&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;update&quot;&gt;Update&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;In R, &lt;a href=&quot;http://www.datasciencetoolkit.org/about&quot;&gt;DataScienceToolkit&lt;/a&gt; will not support  &lt;code class=&quot;highlighter-rouge&quot;&gt;geocode&lt;/code&gt; function &lt;code class=&quot;highlighter-rouge&quot;&gt;dsk&lt;/code&gt; API anymore, please register, please register &lt;a href=&quot;https://developers.google.com/maps/documentation/geocoding/start&quot;&gt;Google GeoCoding API&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;To solve this MIP Optimization problem I use &lt;a href=&quot;https://ampl.com/products/ampl/&quot;&gt;AMPL&lt;/a&gt; which is a optimization modeling system support (CPLEX, Gurobi, Xpress) solver, but it is not free to use except &lt;a href=&quot;https://ampl.com/products/ampl/ampl-for-students/&quot;&gt;30-day trial&lt;/a&gt; for students&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;references&quot;&gt;References&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://ncss-wpengine.netdna-ssl.com/wp-content/themes/ncss/pdf/Procedures/NCSS/Mixed_Integer_Programming.pdf&quot;&gt;Mix Integer Programming&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Macdonald, B. and Pulleyblank, W., 2014. Realignment in the NHL, MLB, NFL, and NBA. &lt;em&gt;Journal of Quantitative Analysis in Sports&lt;/em&gt;, &lt;em&gt;10&lt;/em&gt;(2), pp.225-240.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

</description>
        <pubDate>Tue, 27 Mar 2018 07:00:00 -0500</pubDate>
        <link>http://localhost:4000/2018/03/27/Optimization-Modeling-Sports-League-Realignment/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/27/Optimization-Modeling-Sports-League-Realignment/</guid>
        
        <category>Optimization</category>
        
        <category>Model</category>
        
        <category>AMPL</category>
        
        <category>R</category>
        
        <category>Sports</category>
        
        
      </item>
    
  </channel>
</rss>
